import Head from 'next/head'
import Image from 'next/image';
import {getHomepageData, getProjectsData, getTechnologiesData} from '@/services/cmsDataService';
import Technologies from '@/components/Technologies';
import Projects from '@/components/Projects';
import Contact from '@/components/Contact'
import Header from '@/components/Header'
import Footer from '@/components/Footer';


export async function getStaticProps() {
    return {
        props: {
            homepageData:await getHomepageData(),
            IMAGE_HOST_DOMAIN: process.env.IMAGE_HOST_DOMAIN,
            technologies: await getTechnologiesData(),
            projects: await getProjectsData(),
        }
    }
}

export default function Home({homepageData, IMAGE_HOST_DOMAIN, technologies, projects}) {
    const heading = homepageData.data.attributes.Heading
    const avatar = homepageData.data.attributes.Avatar

    return (
        <div className="bg-gray100cold">
            <Head>
                <title>Create Next App</title>
                <meta name="description" content="Generated by create next app"/>
                <link rel="icon" href="/frontend/public/favicon.ico"/>
            </Head>

            <main>
                <Header/>
                <h1 className="text-3xl font-bold underline">
                    {heading}
                </h1>
                {/*<Image src={`${IMAGE_HOST_DOMAIN}` + avatar.data.attributes.url}*/}
                {/*     alt={avatar.data.attributes.alternativeText}*/}
                {/*     width={avatar.data.attributes.width}*/}
                {/*     height={avatar.data.attributes.height}*/}
                {/*/>*/}

                <Technologies technologies={technologies}/>
                <Projects projects={projects} IMAGE_HOST_DOMAIN={IMAGE_HOST_DOMAIN}/>
                <Contact/>
            </main>
            <Footer/>
        </div>
    )
}
