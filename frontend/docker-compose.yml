version: "3.5"

networks:
  common_network:
    external:
      name: common_network  # must match the actual name of the network created in the external file


services:
  portfolio_next:
    container_name: portfolio_next
    image: ${IMAGE_NAME}:${IMAGE_TAG}
    build:
      context: .
      dockerfile: Dockerfile
      network: common_network  # only when DOCKER_BUILDKIT=0
    restart: always
    networks:
      - common_network
    ports:
      - 3000:3000
    environment:
       - BASE_URL=$BASE_URL
       - IMAGE_HOST_NAME=$IMAGE_HOST_NAME
       - IMAGE_HOST_DOMAIN=$IMAGE_HOST_DOMAIN
       - REVALIDATE_TOKEN=$REVALIDATE_TOKEN
#      - MAIL_USERNAME=$MAIL_USERNAME
#      - MAIL_PASSWORD=$MAIL_PASSWORD
#      - OAUTH_CLIENTID=$OAUTH_CLIENTID
#      - OAUTH_CLIENT_SECRET=$OAUTH_CLIENT_SECRET
#      - OAUTH_REFRESH_TOKEN=$OAUTH_REFRESH_TOKEN
#      - ACCESS_TOKEN=$ACCESS_TOKEN
#      - RECEIVING_EMAILS=$RECEIVING_EMAILS



